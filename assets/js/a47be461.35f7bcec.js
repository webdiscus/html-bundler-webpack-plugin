"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2735],{8249:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Options/PluginOptions/entry","title":"entry (for templates)","description":"Option: entry","source":"@site/docs/Options/PluginOptions/entry.mdx","sourceDirName":"Options/PluginOptions","slug":"/Options/PluginOptions/entry","permalink":"/html-bundler-webpack-plugin/Options/PluginOptions/entry","draft":false,"unlisted":false,"editUrl":"https://github.com/webdiscus/html-bundler-webpack-plugin/tree/master/docs/Options/PluginOptions/entry.mdx","tags":[{"inline":true,"label":"entry","permalink":"/html-bundler-webpack-plugin/tags/entry"},{"inline":true,"label":"entrypoint","permalink":"/html-bundler-webpack-plugin/tags/entrypoint"}],"version":"current","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"slug":"entry","title":"entry (for templates)","tags":["entry","entrypoint"]},"sidebar":"docsSidebar","previous":{"title":"test (for templates)","permalink":"/html-bundler-webpack-plugin/Options/PluginOptions/test"},"next":{"title":"entryFilter","permalink":"/html-bundler-webpack-plugin/Options/PluginOptions/entryFilter"}}');var s=t(4848),a=t(8453);const r={sidebar_position:20,slug:"entry",title:"entry (for templates)",tags:["entry","entrypoint"]},l="Entry point",o={},d=[{value:"<code>entry.import</code>",id:"entryimport",level:2},{value:"<code>entry.filename</code>",id:"entryfilename",level:2},{value:"<code>entry.data</code>",id:"entrydata",level:2},{value:"data as <code>object</code>",id:"data-as-object",level:3},{value:"data as <code>JSON</code> file",id:"data-as-json-file",level:3},{value:"data as <code>JS</code> file",id:"data-as-js-file",level:3},{value:"Base configuration",id:"base-configuration",level:2},{value:"Advanced configuration",id:"advanced-configuration",level:2},{value:"Entry as an object",id:"entry-as-an-object",level:3},{value:"Entry as an array",id:"entry-as-an-array",level:3},{value:"Entry as a path to templates",id:"entry-as-a-path-to-templates",level:3}];function c(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"entry-point",children:"Entry point"})}),"\n",(0,s.jsxs)(n.p,{children:["Option: ",(0,s.jsx)(n.code,{children:"entry"})]}),"\n",(0,s.jsx)(n.p,{children:"Defines entry points for pages, starting from an HTML or template file:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"You can define multiple entries to manually manage template files."}),"\n",(0,s.jsxs)(n.li,{children:["You can specify a ",(0,s.jsx)(n.strong,{children:"template directory"})," to automatically process all templates."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Type:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"EntryObject | Array<EntryDescription> | string\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type EntryObject = {\n  [name: string]: EntryDescription | string;\n};\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type EntryDescription = {\n  // Template file, relative of context or absolute.\n  import: string;\n  // Specifies the filename of the output file.\n  filename?: FilenameTemplate;\n  // The template data.\n  data?: { [key: string]: any } | string;\n};\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type FilenameTemplate =\n  | string\n  | ((pathData: import('webpack/Compilation').PathData, assetInfo?: import('webpack/Compilation').AssetInfo) => string);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"EntryObject"})," has the same structure as ",(0,s.jsx)(n.a,{href:"https://webpack.js.org/configuration/entry-context/#entry",children:"Webpack entry"}),"\nbut the ",(0,s.jsx)(n.code,{children:"EntryDescription"})," includes an additional ",(0,s.jsx)(n.a,{href:"#option-entry-data",children:(0,s.jsx)(n.code,{children:"data"})})," property for passing custom variables into the template."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["You can define templates both in Webpack ",(0,s.jsx)(n.code,{children:"entry"})," and in the ",(0,s.jsx)(n.code,{children:"entry"})," option of the plugin. The syntax is identical.\nBut the ",(0,s.jsx)(n.code,{children:"data"})," property can only be used in the plugin ",(0,s.jsx)(n.code,{children:"entry"})," option."]})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"An HTML template is a starting point for collecting all the dependencies used in your web application.\nSpecify source scripts (JS, TS) and styles (CSS, SCSS, LESS, etc.) directly in HTML.\nThe plugin automatically extracts JS and CSS whose source files are specified in an HTML template."}),"\n",(0,s.jsxs)(n.p,{children:["The key of the ",(0,s.jsx)(n.code,{children:"EntryObject"})," is the output filename (except ",(0,s.jsx)(n.code,{children:".html"})," extension), relative to the ",(0,s.jsx)(n.a,{href:"#option-outputpath",children:(0,s.jsx)(n.code,{children:"outputPath"})})," option."]}),"\n",(0,s.jsx)(n.h2,{id:"entryimport",children:(0,s.jsx)(n.code,{children:"entry.import"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"import"})," is a path to a template file, absolute or relative to the Webpack ",(0,s.jsx)(n.code,{children:"context"})," option."]}),"\n",(0,s.jsx)(n.h2,{id:"entryfilename",children:(0,s.jsx)(n.code,{children:"entry.filename"})}),"\n",(0,s.jsxs)(n.p,{children:["When the ",(0,s.jsx)(n.code,{children:"filename"})," is defined as a ",(0,s.jsx)(n.code,{children:"string"}),", it will be used as the output html filename.\nIn this case, the entry key can be any unique string."]}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    page01: {\n      import: 'src/views/news/sport/index.html', // <= source template\n      filename: 'news/sport.html', // => output ./dist/news/sport.html\n    },\n  },\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When the ",(0,s.jsx)(n.code,{children:"filename"})," is defined as a ",(0,s.jsx)(n.a,{href:"https://webpack.js.org/configuration/output/#template-strings",children:"template string"}),",\nthen the entry key will be used as the ",(0,s.jsx)(n.code,{children:"[name]"})," in the ",(0,s.jsx)(n.code,{children:"template string"}),". Defaults, the ",(0,s.jsx)(n.a,{href:"#option-filename",children:"filename"})," is the ",(0,s.jsx)(n.code,{children:"[name].html"})," template string."]}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    'news/sport': {\n      import: 'src/views/news/sport/index.html', // <= source template\n      filename: '[name].html', // => output ./dist/news/sport.html\n    },\n  },\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"The example above is equivalent to the simple syntax:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    'news/sport': 'src/views/news/sport/index.html',\n  },\n}\n"})}),"\n",(0,s.jsx)("a",{name:"option-entry-data"}),"\n",(0,s.jsx)(n.h2,{id:"entrydata",children:(0,s.jsx)(n.code,{children:"entry.data"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"data"})," is passed into ",(0,s.jsx)(n.a,{href:"#loader-option-preprocessor",children:(0,s.jsx)(n.code,{children:"preprocessor"})})," to render the template with variables."]}),"\n",(0,s.jsxs)(n.h3,{id:"data-as-object",children:["data as ",(0,s.jsx)(n.code,{children:"object"})]}),"\n",(0,s.jsxs)(n.p,{children:["When the ",(0,s.jsx)(n.code,{children:"data"})," is an ",(0,s.jsx)(n.code,{children:"object"}),", it will be loaded once with Webpack start.\nAfter changing the data, you ",(0,s.jsx)(n.strong,{children:"need to restart Webpack"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    index: {\n      import: 'src/views/index.html',\n      // pass data as an object\n      data: {\n        title: 'Home',\n      }\n    },\n}\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"data-as-json-file",children:["data as ",(0,s.jsx)(n.code,{children:"JSON"})," file"]}),"\n",(0,s.jsxs)(n.p,{children:["When the ",(0,s.jsx)(n.code,{children:"data"})," is a ",(0,s.jsx)(n.code,{children:"string"}),", it must be an absolute or relative path to a file.\nThe file can be a ",(0,s.jsx)(n.code,{children:"JSON"})," file or a ",(0,s.jsx)(n.code,{children:"JS"})," file that exports the data as an object.\nUse the ",(0,s.jsx)(n.code,{children:"data"})," as a file if you want to get dynamic data in a template.\nThe data file will be reloaded after changes, ",(0,s.jsx)(n.strong,{children:"without restarting Webpack"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, using ",(0,s.jsx)(n.code,{children:"*.json"})," data file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    index: {\n      import: 'src/views/index.html',\n      // load data from JSON file\n      data: 'src/data/home.json',\n    },\n  },\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The data file ",(0,s.jsx)(n.em,{children:"src/data/home.json"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "title": "Home"\n}\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"data-as-js-file",children:["data as ",(0,s.jsx)(n.code,{children:"JS"})," file"]}),"\n",(0,s.jsxs)(n.p,{children:["To load data into a template dynamically you can use ",(0,s.jsx)(n.code,{children:"JS"})," file.\nIn JS file you can load data from a database."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, using ",(0,s.jsx)(n.code,{children:"*.js"})," data file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    index: {\n      import: 'src/views/index.html',\n      // load data from JS file\n      data: 'src/data/home.js',\n    },\n  },\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The data file ",(0,s.jsx)(n.em,{children:"src/data/home.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// here you can load data from a database\nconst data = {\n  title: 'Home',\n};\n\nmodule.exports = data;\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["To pass global variables in all templates use the ",(0,s.jsx)(n.a,{href:"#loader-option-data",children:"data"})," plugin option."]})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"base-configuration",children:"Base configuration"}),"\n",(0,s.jsx)(n.p,{children:"If the entry point is defined as a string, it must be a template file with an absolute or relative path."}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    index: path.join(__dirname, 'src/views/home/index.html'), // => dist/index.html\n    'news/sport': 'src/views/news/sport/index.html', // => dist/news/sport.html\n  },\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced configuration"}),"\n",(0,s.jsxs)(n.p,{children:["If you need to pass data to a template or want to dynamically generate an output filename regardless of the entry key,\nyou can define the value of an entry as an ",(0,s.jsx)(n.code,{children:"EntryDescription"})," object."]}),"\n",(0,s.jsx)(n.h3,{id:"entry-as-an-object",children:"Entry as an object"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: {\n    // Output dist/index.html\n    index: {\n      import: 'src/views/index.html', // template file\n      data: { title: 'Homepage' }, // page specifically variables\n    },\n    // Output dist/about.html\n    about: {\n      import: 'src/views/about.html',\n      data: { title: 'About' },\n    },\n    // Output dist/news/sport.html\n    'news/sport': {\n      import: 'src/views/news/sport.html',\n      data: { title: 'Sport' },\n    },\n  },\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"entry-as-an-array",children:"Entry as an array"}),"\n",(0,s.jsxs)(n.p,{children:["If the ",(0,s.jsx)(n.code,{children:"entry"})," is an array of ",(0,s.jsx)(n.code,{children:"EntryDescription"}),", the ",(0,s.jsx)(n.code,{children:"filename"})," property is required."]}),"\n",(0,s.jsx)(n.p,{children:"This is identical to the previous example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"{\n  entry: [\n    {\n      filename: 'index.html', // Output dist/index.html\n      import: 'src/views/index.html', // template file\n      data: { title: 'Homepage' }, // page specifically variables\n    },\n    {\n      filename: 'about.html', // Output dist/about.html\n      import: 'src/views/about.html',\n      data: { title: 'About' },\n    },\n    {\n      filename: 'news/sport.html', // Output dist/news/sport.html\n      import: 'src/views/news/sport.html',\n      data: { title: 'Sport' },\n    },\n  ],\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The difference between ",(0,s.jsx)(n.strong,{children:"object"})," and ",(0,s.jsx)(n.strong,{children:"array"})," notation:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Using the ",(0,s.jsx)(n.strong,{children:"object"})," notation the output ",(0,s.jsx)(n.strong,{children:"filename"})," is the key of the entry item without the ",(0,s.jsx)(n.code,{children:".html"})," file extension."]}),"\n",(0,s.jsxs)(n.li,{children:["Using the ",(0,s.jsx)(n.strong,{children:"array"})," notation the output ",(0,s.jsx)(n.strong,{children:"filename"})," is the ",(0,s.jsx)(n.code,{children:"filename"})," property of the array item contained the file with ",(0,s.jsx)(n.code,{children:".html"})," file extension."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"entry-as-a-path-to-templates",children:"Entry as a path to templates"}),"\n",(0,s.jsx)(n.p,{children:"You can define the entry as a path to recursively detect all templates from that directory."}),"\n",(0,s.jsxs)(n.p,{children:["When the value of the ",(0,s.jsx)(n.code,{children:"entry"})," is a string, it must be an absolute or relative path to the templates' directory.\nTemplates matching the ",(0,s.jsx)(n.a,{href:"#option-test",children:"test"})," option are detected recursively from the path.\nThe output files will have the same folder structure as source template directory."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, there are files in the template directory ",(0,s.jsx)(n.code,{children:"./src/views/"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./src/views/\n\u2502\u2500\u2500 index.html\n\u2502\u2500\u2500 about/\n\u2502   \u2514\u2500\u2500 index.html\n\u2502\u2500\u2500 news/\n\u2502   \u2514\u2500\u2500 sport/\n\u2502       \u251c\u2500\u2500 index.html\n\u2502       \u251c\u2500\u2500 script.js\n\u2502       \u2514\u2500\u2500 style.scss\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"Define the entry option as the relative path to pages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"new HtmlBundlerPlugin({\n  entry: 'src/views/',\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Files that are not matching to the ",(0,s.jsx)(n.a,{href:"#option-test",children:"test"})," option are ignored.\nThe output HTML filenames keep their source structure in the output directory relative to the entry path:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./dist/\n\u2502\u2500\u2500 index.html\n\u2502\u2500\u2500 about/\n\u2502   \u2514\u2500\u2500 index.html\n\u2502\u2500\u2500 news/\n\u2502   \u2514\u2500\u2500 sport/\n\u2502       \u2514\u2500\u2500 index.html\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If you need to modify the output HTML filename, use the ",(0,s.jsx)(n.a,{href:"#option-filename",children:"filename"})," option as the function."]}),"\n",(0,s.jsxs)(n.p,{children:["For example, we want keep a source structure for all pages,\nwhile ",(0,s.jsx)(n.code,{children:"./src/views/home/index.html"})," should not be saved as ",(0,s.jsx)(n.code,{children:"./dist/home/index.htm"}),", but as ",(0,s.jsx)(n.code,{children:"./dist/index.htm"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"new HtmlBundlerPlugin({\n  // path to templates\n  entry: 'src/views/',\n\n  filename: ({ filename, chunk: { name } }) => {\n    // transform 'home/index' filename to output file 'index.html'\n    if (name === 'home/index') {\n      return 'index.html'; // save as index.html in output directory\n    }\n    // bypass the original structure\n    return '[name].html';\n  },\n});\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"In serve/watch mode, you can add/delete/rename a template file in the entry path without restarting Webpack."})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(6540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);