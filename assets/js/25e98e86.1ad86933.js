"use strict";(self.webpackChunkhtml_bundler_docs=self.webpackChunkhtml_bundler_docs||[]).push([[3749],{5053:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"faq/keep-folder-structure-assets","title":"How to keep source directory structure for assets","description":"Define the filename as a function.","source":"@site/docs/faq/keep-folder-structure-assets.md","sourceDirName":"faq","slug":"/faq/keep-folder-structure-assets","permalink":"/html-bundler-webpack-plugin/faq/keep-folder-structure-assets","draft":false,"unlisted":false,"editUrl":"https://github.com/webdiscus/html-bundler-docs-gh/tree/master/docs/faq/keep-folder-structure-assets.md","tags":[],"version":"current","sidebarPosition":81,"frontMatter":{"sidebar_position":81,"title":"How to keep source directory structure for assets"},"sidebar":"faqSidebar","previous":{"title":"How to keep source directory structure for HTML","permalink":"/html-bundler-webpack-plugin/faq/keep-folder-structure-html"},"next":{"title":"How to use image references in HTML","permalink":"/html-bundler-webpack-plugin/faq/using-images-in-html"}}');var n=s(4848),o=s(8453);const a={sidebar_position:81,title:"How to keep source directory structure for assets"},c="How to keep source directory structure for assets (fonts, images, etc.)",i={},l=[];function d(e){const t={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"how-to-keep-source-directory-structure-for-assets-fonts-images-etc",children:"How to keep source directory structure for assets (fonts, images, etc.)"})}),"\n",(0,n.jsxs)(t.p,{children:["Define the ",(0,n.jsx)(t.code,{children:"filename"})," as a function."]}),"\n",(0,n.jsxs)(t.p,{children:["For example, we want to keep original directory structure for fonts, which can be in the source or in the ",(0,n.jsx)(t.code,{children:"node_modules"})," directory:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"node_modules/material-icons/iconfont/material-icons-sharp.woff2\nnode_modules/material-symbols/material-symbols-sharp.woff2\nsrc/assets/fonts/Roboto/Roboto-Regular.woff2\n"})}),"\n",(0,n.jsx)(t.p,{children:"Use the following function:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"{\n  test: /[\\\\/]fonts|node_modules[\\\\/].+(woff(2)?|ttf|otf|eot|svg)$/i,\n    type: 'asset/resource',\n    generator: {\n    // keep original directory structure\n    filename: ({ filename }) => {\n      const srcPath = 'src/assets/fonts';\n      const regExp = new RegExp(`[\\\\\\\\/]?(?:${path.normalize(srcPath)}|node_modules)[\\\\\\\\/](.+?)$`);\n      const assetPath = path.dirname(regExp.exec(filename)[1].replace('@', '').replace(/\\\\/g, '/'));\n\n      return `fonts/${assetPath}/[name][ext][query]`;\n    },\n  },\n},\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The destructed ",(0,n.jsx)(t.code,{children:"filename"})," argument of the function is a source file. It can be absolute or relative."]}),"\n",(0,n.jsxs)(t.p,{children:["The output directory ",(0,n.jsx)(t.code,{children:"dist/"})," will have the same structure:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"dist/fonts/material-icons/iconfont/material-icons-sharp.woff2\ndist/fonts/material-symbols/material-symbols-sharp.woff2\ndist/fonts/Roboto/Roboto-Regular.woff2\n"})}),"\n",(0,n.jsx)(t.p,{children:"The example to keep original directory structure for images:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"{\n  test: /[\\\\/]images|node_modules[\\\\/].+(png|jpe?g|webp|ico|svg)$/i,\n    type: 'asset/resource',\n    generator: {\n    // keep original directory structure\n    filename: ({ filename }) => {\n      const srcPath = 'src/assets/images';\n      const regExp = new RegExp(`[\\\\\\\\/]?(?:${path.normalize(srcPath)}|node_modules)[\\\\\\\\/](.+?)$`);\n      const assetPath = path.dirname(regExp.exec(filename)[1].replace('@', '').replace(/\\\\/g, '/'));\n\n      return `images/${assetPath}/[name].[hash:8][ext]`;\n    },\n  },\n},\n"})}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsx)(t.p,{children:"For images, it is recommended to use the hashed output filename."})}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>c});var r=s(6540);const n={},o=r.createContext(n);function a(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);