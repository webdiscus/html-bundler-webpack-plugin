"use strict";(self.webpackChunkhtml_bundler_docs=self.webpackChunkhtml_bundler_docs||[]).push([[6943],{7973:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"faq/split-chunks-keep-module-name","title":"How to keep package name for split chunks","description":"To save split chunks under a custom name use optimization.splitChunks.cacheGroups..name as function.","source":"@site/docs/faq/split-chunks-keep-module-name.md","sourceDirName":"faq","slug":"/faq/split-chunks-keep-module-name","permalink":"/html-bundler-webpack-plugin/faq/split-chunks-keep-module-name","draft":false,"unlisted":false,"editUrl":"https://github.com/webdiscus/html-bundler-docs/tree/docusaurus/docs/faq/split-chunks-keep-module-name.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"faqSidebar","previous":{"title":"How to configure splitChunks","permalink":"/html-bundler-webpack-plugin/faq/split-chunks"},"next":{"title":"How to keep source directory structure for HTML","permalink":"/html-bundler-webpack-plugin/faq/keep-folder-structure-html"}}');var o=s(4848),i=s(8453);const a={sidebar_position:6},c="How to keep package name for split chunks",r={},l=[];function d(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"how-to-keep-package-name-for-split-chunks",children:"How to keep package name for split chunks"})}),"\n",(0,o.jsxs)(n.p,{children:["To save split chunks under a custom name use ",(0,o.jsx)(n.code,{children:"optimization.splitChunks.cacheGroups.{cacheGroup}.name"})," as function."]}),"\n",(0,o.jsxs)(n.p,{children:["For example, many node modules are imported in the ",(0,o.jsx)(n.code,{children:"main.js"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { Button } from 'bootstrap';\nimport _, { map } from 'underscore';\n// ...\n"})}),"\n",(0,o.jsxs)(n.p,{children:["There is a template used the ",(0,o.jsx)(n.code,{children:"main.js"})," ",(0,o.jsx)(n.em,{children:"./src/views/index.html"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<html>\n  <head>\n    \x3c!-- include source script --\x3e\n    <script src="./main.js" defer="defer"><\/script>\n  </head>\n  <body>\n    <h1>Hello World!</h1>\n  </body>\n</html>\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Then, use the ",(0,o.jsx)(n.code,{children:"optimization.splitChunks.cacheGroups.{cacheGroup}.name"})," as following function:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const HtmlBundlerPlugin = require('html-bundler-webpack-plugin');\n\nmodule.exports = {\n  plugins: [\n    new HtmlBundlerPlugin({\n      entry: {\n        index: 'src/views/index.html',\n      },\n      js: {\n        filename: 'js/[name].[contenthash:8].js',\n        chunkFilename: 'js/[id].[contenthash:8].js',\n      },\n    }),\n  ],\n  optimization: {\n    runtimeChunk: true,\n    splitChunks: {\n      maxSize: 1000000, // split chunks bigger than 100KB, defaults is 20KB\n      cacheGroups: {\n        app: {\n          test: /\\.(js|ts)$/, // <= IMPORTANT: split only script files\n          chunks: 'all', // <= define it only in a cache group\n          name({ context }, chunks, groupName) {\n            // save split chunks of the node module under package name\n            if (/[\\\\/]node_modules[\\\\/]/.test(context)) {\n              const moduleName = context.match(/[\\\\/]node_modules[\\\\/](.*?)(?:[\\\\/]|$)/)[1].replace('@', '');\n              return `npm.${moduleName}`;\n            }\n            // save split chunks of the application\n            return groupName;\n          },\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.admonition,{type:"warning",children:[(0,o.jsx)(n.p,{children:"The group name MUST be different from the script names used in the template.\nOtherwise, a chunk name conflict occurs."}),(0,o.jsxs)(n.p,{children:["For example,\nif you are already using ",(0,o.jsx)(n.code,{children:"main.js"})," in the template, the group name should not be ",(0,o.jsx)(n.code,{children:"main"}),".\nTake another name, e.g. ",(0,o.jsx)(n.code,{children:"app"}),"."]})]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The split files will be saved like this:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"dist/js/runtime.9cd0e0f9.js\ndist/js/npm.bootstrap.f69a4e44.js <- split chunks of node modules\ndist/js/npm.underscore.4e44f69a.js\ndist/js/main.3010da09.js <- base code of main script\ndist/js/app-5fa74877.7044e96a.js <- split chinks of main script\ndist/js/app-d6ae2b10.92215a4e.js\ndist/js/app-5fa74877.1aceb2db.js\n\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var t=s(6540);const o={},i=t.createContext(o);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);